![Git](/images/git.jpg)

<br><br>

# Инструкция по командам Git

## Общее по Git
Git — система контроля версий (файлов). Что-то вроде возможности сохраняться в компьютерных играх (в Git эквивалент игрового сохранения — коммит).<br>
**Важно**: добавление файлов к «сохранению» двухступенчатое: сначала добавляем файл в индекс (`git add`), потом «сохраняем» (`git commit`).

Любой файл в директории существующего репозитория может находиться или не находиться под версионным контролем (отслеживаемые и неотслеживаемые).

Отслеживаемые файлы могут быть в 3-х состояниях: неизменённые, изменённые, проиндексированные (готовые к коммиту).

## Настройки
Перед началом работы нужно выполнить некоторые настройки:

``` bash
git config --global user.name "Your Name" # указать имя, которым будут подписаны коммиты
git config --global user.email "e@w.com"  # указать электронную почту, которая будет в описании коммита
```

Если вы в Windows:

``` bash
git config --global core.autocrlf true # включить преобразование окончаний строк из CRLF в LF
```

## Указатели

- `HEAD` — указатель на текущий коммит или на текущую ветку (то есть, в любом случае, на коммит). Указывает на родителя коммита, который будет создан следующим.
- `ORIG_HEAD` — указатель на коммит, с которого вы только что переместили `HEAD` (командой `git reset ...`, например).
- Ветка (`master`, `develop` etc.) — указатель на коммит. При добавлении коммита указатель ветки перемещается с родительского коммита на новый.
- Теги — простые указатели на коммиты. Не перемещаются.

## Создание репозитория

``` bash
git init # создать репозиторий в текущем каталоге
```
Создание каталога `my_project` в текущем каталоге и создание в каталоге `my_project` репозитория:
``` bash
git init my_project # создать репозиторий my_project
```
Если известно название и расположение внешнего (удаленного) репозитория `url`, то его можно склонировать командой:
``` bash
git clone url # скачать репозиторий, расположенный по адресу url
```

## Состояние репозитория
Список незакоммиченных файлов:
``` bash
git status
```
Изменения в еще не добавленных в индекс файлах
``` bash
git diff
```
Изменения в уже добавленных
``` bash
git diff --cached
```
Все изменения
``` bash
git diff HEAD
```
Изменения между двумя коммитами, где:<br>`hash1`-хеш первого коммита, `hash2`-хеш второго коммита.
``` bash
git diff hash1 hash2
```
Получить даты изменений файла `file_name` и их авторов:
``` bash
git blame file_name
```
Список коммитов:
``` bash
git log
```
## Сохранение состояния
Добавить файл `file_name` в индекс:
``` bash
git add file_name
```
Добавить все файлы 
``` bash
git add .
```
Создать коммит с сообщением `message`
``` bash
git commit -m "message"
```
Добавить все файлы и создать коммит с сообщением `message`
``` bash
git commit -am "message"
```
Отмена изменений в коммите с хеш `hash_commit`
``` bash
git revert hash_commit
```
## Работа с ветками
Список локальных веток
``` bash
git branch
```
Список всех веток
``` bash
git branch -av
```
Переключиться на ветку `my_branch` 
``` bash
git checkout my_branch
```
Создать ветку `my_branch` и переключиться на нее
``` bash
git checkout -b my_branch
```
Удалить ветку `my_branch`
``` bash
git branch -d my_branch
```
Слияние ветки `a_branch` с веткой  `b_branch`
``` bash
git checkout b_branch && git merge a_branch
```
Создать тег `tag_name` для текущего коммита.
``` bash
git tag tag_name
```
## Работа с удалёнными репозиториями

Есть два распространённых способа привязать удалённый репозиторий к локальному: по HTTPS и по SSH. Если SSH у вас не настроен (или вы не знаете что это), привязывайте удалённый репозиторий по HTTPS (адрес привязываемого репозитория должен начинаться с https://).

``` bash
git remote -v              # показать список удалённых репозиториев, связанных с локальным
git branch -r              # показать удаленные ветки
git branch -a              # показать все ветки(локальные и удаленные)       
git remote remove origin   # убрать привязку удалённого репозитория с сокр. именем origin
git remote add origin https://github.com:nicothin/test.git # добавить удалённый репозиторий (с сокр. именем origin) с указанным URL
git remote rm origin       # удалить привязку удалённого репозитория
git remote show origin     # получить данные об удалённом репозитории с сокращенным именем origin
git fetch origin           # скачать все ветки с удаленного репозитория (с сокр. именем origin), но не сливать со своими ветками
git fetch origin master    # то же, но скачивается только указанная ветка
git checkout --track origin/github_branch # создать локальную ветку github_branch (данные взять из удалённого репозитория с сокр. именем origin, ветка github_branch) и переключиться на неё
git push origin master     # отправить в удалённый репозиторий (с сокр. именем origin) данные своей ветки master
git pull origin            # влить изменения с удалённого репозитория (все ветки)
git pull origin master     # влить изменения с удалённого репозитория (только указанная ветка)
```

## Обновление
Скачать изменения из удаленного репозитория
``` bash
git fetch
```
Скачать изменения из удаленного репозитория и выполнить слияние c `HEAD`
``` bash
git pull
```
Отправить локальные коммиты в удаленный репозиторий
``` bash
git push
```

## Помощь
Если необходима помощь по команде `name_git`, Вы всегда можете воспользоваться командой:
``` bash
git name_cmd --help # помощь по команде name_cmd
```

<br><br>

---
<br>

## Ссылки
1. Популярные системы управления репозиториями
    + [GitHub](https://github.com/)
    + [GitLab](https://https://about.gitlab.com/)
2. Описание команд git
    + [git book](https://git-scm.com/book/ru/v2)
    + [habr.com](https://habr.com/ru/companies/ruvds/articles/599929/ "30 команд Git, необходимых для освоения интерфейса командной строки Git")